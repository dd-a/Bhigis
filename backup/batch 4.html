<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>BhiGIS - G√©ocodage en lot</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 900px; margin: auto; }
        h2, h3 { color: #333; }
        table { border-collapse: collapse; margin: 15px auto; }
        table, th, td { border: 1px solid #666; padding: 5px; text-align: center; }
        th { background: rebeccapurple; color: white; }
        #status { margin-top: 15px; font-weight: bold; }
        #download-section { display: none; margin-top: 20px; text-align: center; }
        #download-btn {
            background-color: rebeccapurple;
            color: white;
            padding: 10px 20px;
            font-weight: bold;
            border-radius: 10px;
            border: none;
            cursor: pointer;
        }
        #download-btn:hover { background-color: indigo; }
    </style>
</head>
<body>
   <!-- <nav>
        <a href="{{ url_for('index') }}">‚á¶ Retour √† la recherche simple</a>
    </nav> -->
<div class="container">
    <h2>Bienvenue dans BhiGIS (traitement par lots)</h2>
    <p>
        Vous pouvez charger un fichier <strong>Excel (.xlsx)</strong> ou <strong>LibreOffice (.ods)</strong> ou un fichier
        <strong>CSV UTF-8</strong> avec s√©parateur <code>';'</code>. <br>
        <br>Les adresses peuvent indiff√©remment √™tre libell√©es en fran√ßais ou en n√©erlandais.
		La structure attendue est : un identifiant unique, le nom de rue, le num√©ro, la commune, l‚Äôann√©e,
        et un champ libre (commentaire). Les champs 'id', 'nom de rue', 'commune' doivent imp√©rativement contenir quelque chose,
		le champ 'ann√©e' est vivement conseill√©, le num√©ro ne sera probablement pas utilis√© dans les √©poques tr√®s anciennes (< 1850).
		Les noms des communes doivent √™tre standard en fran√ßais ou en n√©erlandais, et correspondre √† l'√©poque recherch√©e.
    </p>
	<div style="margin-top:20px; text-align:center;">
	    <a href="{{ url_for('index') }}">
	        <button type="button">üìÇ Ou alors aller vers la localisation ponctuelle --></button>
	    </a>
	</div>

    <h3>Exemple de structure de fichier :</h3>
    <table>
        <tr>
            <th>id</th>
            <th>rue</th>
            <th>numero</th>
            <th>commune</th>
            <th>annee</th>
            <th>commentaire</th>
        </tr>
        <tr>
            <td>1</td>
            <td>Rue Royale</td>
            <td>41a</td>
            <td>Bruxelles</td>
            <td>1920</td>
            <td>boulangerie</td>
        </tr>
        <tr>
            <td>2</td>
            <td>Av. Brugmann</td>
            <td>25</td>
            <td>Saint-Gilles</td>
            <td>1936</td>
            <td>Peintres-artistes</td>
        </tr>
        <tr>
            <td>3</td>
            <td>Rue Hazew√©e</td>
            <td>1</td>
            <td>Laeken</td>
            <td>2015</td>
            <td>Snuls</td>
        </tr>
        <tr>
            <td>4</td>
            <td>Beukenstraat</td>
            <td>74-76</td>
            <td>Vorst</td>
            <td>1912</td>
            <td>Couture</td>
        </tr>
    </table>

	<h3>1. S√©lectionnez votre fichier :</h3>
	<form id="uploadForm" enctype="multipart/form-data">
	    <input type="file" id="fileInput" name="file" accept=".xlsx,.ods,.csv" required>
	</form>
	<div id="status"></div>

	<div id="column-mapping" style="margin-top:20px;">
	    <!-- Dropdowns ajout√©s par JS -->
	</div>

	<!-- Bouton de validation du mapping (cach√© au d√©part) -->
	<button id="submitMapping" style="display:none; margin-top:15px;">
	    Confirmer et lancer le traitement
	</button>

    <div id="download-section">
        <h3>3. T√©l√©chargez vos r√©sultats :</h3>
        <a id="download-link">
            <button id="download-btn">T√©l√©charger le fichier ZIP</button>
        </a>
    </div>

    <p style="margin-top: 30px; font-size: 14px;">
        Le fichier de r√©sultats contient 3 tables :
        <ul>
            <li>les adresses g√©ocod√©es,</li>
            <li>les adresses non trouv√©es,</li>
            <li>des suggestions de correction.</li>
        </ul>
    </p>

	<!-- <div id="column-mapping" style="margin-top:20px;"> -->
	    <!-- Les dropdowns seront ajout√©s ici par JS -->
	<!-- </div> -->
	<!-- <div id="column-mapping" style="margin-top:20px; text-align:center;"> -->
    	<!-- Les dropdowns seront ajout√©s ici par JS -->
    	<!-- <button id="submitMapping" style="display:none; margin-top:15px;">Confirmer le choix et lancer le traitement</button>
	</div> -->

</div>

<script src="{{ url_for('static', filename='batch.js') }}"></script>
</body>
</html>
